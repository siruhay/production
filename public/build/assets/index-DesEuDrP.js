import{p as ee,q as ae,x as pe,s as Q,C as N,M as te,l as g,e as a,Y as K,b4 as le,N as me,P as be,b5 as ge,b6 as ve,b7 as he,j as d,a6 as ke,a7 as ne,W as R,y as we,b8 as _e,b9 as ye,ba as Ve,aY as xe,aZ as U,bb as q,al as Ce,bc as oe,bd as Se,be as Te,bf as $e,a$ as Pe,bg as Ae,bh as D,_ as Ue,b as x,w as n,d as J,o as u,a8 as Be,aw as B,T as y,k as F,av as M,i as h,V as L,g as C,h as I,n as X,ay as z,m as b,az as k,f as j,aA as Z,aJ as je,aK as Fe}from"./App-Cjn2ipPq.js";import{V as Ie}from"./VOtpInput-DTwo-Ue4.js";const se=ae({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...be(ge({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),O=ee()({name:"VTab",props:se(),setup(e,t){let{slots:c,attrs:s}=t;const{textColorClasses:V,textColorStyles:r}=pe(()=>e.sliderColor),w=Q(),S=Q(),p=N(()=>e.direction==="horizontal"),o=N(()=>{var m,l;return((l=(m=w.value)==null?void 0:m.group)==null?void 0:l.isSelected.value)??!1});function f(m){var i,_;let{value:l}=m;if(l){const v=(_=(i=w.value)==null?void 0:i.$el.parentElement)==null?void 0:_.querySelector(".v-tab--selected .v-tab__slider"),G=S.value;if(!v||!G)return;const ie=getComputedStyle(v).color,T=v.getBoundingClientRect(),$=G.getBoundingClientRect(),E=p.value?"x":"y",H=p.value?"X":"Y",W=p.value?"right":"bottom",P=p.value?"width":"height",de=T[E],ue=$[E],A=de>ue?T[W]-$[W]:T[E]-$[E],re=Math.sign(A)>0?p.value?"right":"bottom":Math.sign(A)<0?p.value?"left":"top":"center",fe=(Math.abs(A)+(Math.sign(A)<0?T[P]:$[P]))/Math.max(T[P],$[P])||0,ce=T[P]/$[P]||0,Y=1.5;ve(G,{backgroundColor:[ie,"currentcolor"],transform:[`translate${H}(${A}px) scale${H}(${ce})`,`translate${H}(${A/Y}px) scale${H}(${(fe-1)/Y+1})`,"none"],transformOrigin:Array(3).fill(re)},{duration:225,easing:he})}}return te(()=>{const m=g.filterProps(e);return a(g,K({symbol:le,ref:w,class:["v-tab",e.class],style:e.style,tabindex:o.value?0:-1,role:"tab","aria-selected":String(o.value),active:!1},m,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":f}),{...c,default:()=>{var l;return d(R,null,[((l=c.default)==null?void 0:l.call(c))??e.text,!e.hideSlider&&d("div",{ref:S,class:ne(["v-tab__slider",V.value]),style:ke(r.value)},null)])}})}),me({},w)}});function ze(e){return e?e.map(t=>Ae(t)?t:{text:t,value:t}):[]}const De=ae({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Pe(se(),["spaced"]),...$e({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Te(),...Se()},"VTabs"),Oe=ee()({name:"VTabs",props:De(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:c,slots:s}=t;const V=we(e,"modelValue"),r=N(()=>ze(e.items)),{densityClasses:w}=_e(e),{backgroundColorClasses:S,backgroundColorStyles:p}=ye(()=>e.bgColor),{scopeId:o}=Ve();return xe({VTab:{color:U(()=>e.color),direction:U(()=>e.direction),stacked:U(()=>e.stacked),fixed:U(()=>e.fixedTabs),sliderColor:U(()=>e.sliderColor),hideSlider:U(()=>e.hideSlider)}}),te(()=>{const f=q.filterProps(e),m=!!(s.window||e.items.length>0);return d(R,null,[a(q,K(f,{modelValue:V.value,"onUpdate:modelValue":l=>V.value=l,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},w.value,S.value,e.class],style:[{"--v-tabs-height":Ce(e.height)},p.value,e.style],role:"tablist",symbol:le},o,c),{default:()=>{var l;return[((l=s.default)==null?void 0:l.call(s))??r.value.map(i=>{var _;return((_=s.tab)==null?void 0:_.call(s,{item:i}))??a(O,K(i,{key:i.text,value:i.value,spaced:e.spaced}),{default:s[`tab.${i.value}`]?()=>{var v;return(v=s[`tab.${i.value}`])==null?void 0:v.call(s,{item:i})}:void 0})})]}}),m&&a(oe,K({modelValue:V.value,"onUpdate:modelValue":l=>V.value=l,key:"tabs-window"},o),{default:()=>{var l;return[r.value.map(i=>{var _;return((_=s.item)==null?void 0:_.call(s,{item:i}))??a(D,{value:i.value},{default:()=>{var v;return(v=s[`item.${i.value}`])==null?void 0:v.call(s,{item:i})}})}),(l=s.window)==null?void 0:l.call(s)]}})])}),{}}}),Ee={name:"account-setting",computed:{tabTitle:function(){switch(this.tabSelected){case"password":return"Katasandi";case"twofactor":return"Dua Faktor Otentikasi";case"sessions":return"Sesi Browser";default:return"Pengguna"}}},data:()=>({tabSelected:"account",svgQrCode:null,visible:!1,show1:!1,show2:!1,show3:!1}),methods:{confirmTwoFactorAuthentication:function(e){this.$http("account/api/setting/confirmed-factor-authentication",{method:"POST",params:{code:e.otp_two_factor}}).then(()=>{e.confirmed_two_factor=!0}).catch(()=>{e.otp_two_factor=null})},disableTwoFactorAuthentication:function(e){this.$http("account/api/setting/two-factor-authentication",{method:"DELETE"}).then(()=>{e.svg_two_factor=null,e.enabled_two_factor=!1,e.confirmed_two_factor=!1,e.url_two_factor=null})},enableTwoFactorAuthentication:function(e){this.$http("account/api/setting/two-factor-authentication",{method:"POST"}).then(({recovery:t,svg:c,url:s})=>{e.svg_two_factor=c,e.enabled_two_factor=!0,e.recovery_code_two_factor=t,e.url_two_factor=s})},logoutOtherDevices:function(e,t){typeof e=="function"&&e(),this.$http("account/api/setting/logout-other-devices",{method:"POST",params:{password:t.password}}).then(({sessions:c})=>{t.sessions=c})},updateHighlight:function(e,t){t.highlight=e},updatePassword:function(e){this.$http("account/api/setting/update-password",{method:"POST",params:{current_password:e.current_password,password:e.password,password_confirmation:e.password_confirmation}})},updateProfile:function(e){this.$http("account/api/setting/update-profile",{method:"POST",params:e}).then(({auth:t})=>{this.auth=t,this.$storage.setItem("auth",t),this.theme="theme"in this.auth?this.auth.theme:"teal"})},updateTheme:function(e,t){t.theme=e}}},He={class:"d-flex align-center my-4"},Me={class:"font-weight-medium text-caption text-uppercase"},Ke={key:0,class:"text-grey-darken-1"},Re={key:1,class:"text-grey-darken-1"},Ge=["innerHTML"],Le={key:2,class:"text-grey-darken-1"},Ne={class:"d-flex mt-4 justify-center bg-yellow-lighten-5 py-4 rounded-lg"},We={class:"text-center"},Ye={class:"d-flex align-center w-100 pb-2"},Qe={class:"d-block flex-grow-1 mx-2"},qe={class:"text-caption font-weight-bold"},Je={class:"text-caption",style:{"font-size":"10px !important"}},Xe={key:0,class:"text-green"},Ze={key:1},ea={class:"d-flex px-6 pb-6"};function aa(e,t,c,s,V,r){const w=J("page-paper"),S=J("page-blank");return u(),x(S,{"page-name":"account-setting","page-key":"setting",title:"setting","show-sidenav":""},{default:n(({combos:{colors:p},record:o,theme:f,store:m})=>[a(w,null,{default:n(()=>[d("div",He,[a(Be,{color:`${f}`,class:"mx-auto",size:"small",variant:"flat"},{default:n(()=>[d("div",Me,B(r.tabTitle),1)]),_:1},8,["color"])]),a(Oe,{"align-tabs":"center",color:"primary",modelValue:e.tabSelected,"onUpdate:modelValue":t[0]||(t[0]=l=>e.tabSelected=l),stacked:""},{default:n(()=>[a(O,{value:"account"},{default:n(()=>[a(y,{icon:"person"})]),_:1}),a(O,{value:"password"},{default:n(()=>[a(y,{icon:"lock"})]),_:1}),a(O,{value:"twofactor"},{default:n(()=>[a(y,{icon:"encrypted"})]),_:1}),a(O,{value:"sessions"},{default:n(()=>[a(y,{icon:"settings_cinematic_blur"})]),_:1})]),_:1},8,["modelValue"]),a(F),a(oe,{modelValue:e.tabSelected,"onUpdate:modelValue":t[5]||(t[5]=l=>e.tabSelected=l)},{default:n(()=>[a(D,{value:"account"},{default:n(()=>[a(M,{class:"mx-auto","max-width":"400"},{default:n(()=>[a(h,null,{default:n(()=>[a(L,null,{default:n(()=>[a(C,{cols:"12"},{default:n(()=>[a(I,{label:"Nama Pengguna",modelValue:o.username,"onUpdate:modelValue":l=>o.username=l,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(C,{cols:"12"},{default:n(()=>[a(X,{items:p,label:"Thema",modelValue:o.theme,"onUpdate:modelValue":[l=>o.theme=l,l=>r.updateTheme(l,m)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),a(C,{cols:"12"},{default:n(()=>[a(X,{items:p,label:"Highlight",modelValue:o.highlight,"onUpdate:modelValue":[l=>o.highlight=l,l=>r.updateHighlight(l,m)],"hide-details":""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(F),a(h,{class:"d-flex"},{default:n(()=>[a(z),a(g,{color:f,variant:"flat",onClick:l=>r.updateProfile(o)},{default:n(()=>[...t[6]||(t[6]=[b("update profile",-1)])]),_:1},8,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(D,{value:"password"},{default:n(()=>[a(M,{class:"mx-auto","max-width":"400"},{default:n(()=>[a(h,null,{default:n(()=>[a(L,null,{default:n(()=>[a(C,{cols:"12"},{default:n(()=>[a(I,{type:e.show1?"text":"password","append-inner-icon":e.show1?"visibility":"visibility_off",label:"Saat ini",modelValue:o.current_password,"onUpdate:modelValue":l=>o.current_password=l,"hide-details":"","onClick:appendInner":t[1]||(t[1]=l=>e.show1=!e.show1)},null,8,["type","append-inner-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),a(C,{cols:"12"},{default:n(()=>[a(I,{type:e.show2?"text":"password","append-inner-icon":e.show2?"visibility":"visibility_off",label:"Sandi Baru",modelValue:o.password,"onUpdate:modelValue":l=>o.password=l,"hide-details":"","onClick:appendInner":t[2]||(t[2]=l=>e.show2=!e.show2)},null,8,["type","append-inner-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),a(C,{cols:"12"},{default:n(()=>[a(I,{type:e.show3?"text":"password","append-inner-icon":e.show3?"visibility":"visibility_off",label:"Konfirmasi",modelValue:o.password_confirmation,"onUpdate:modelValue":l=>o.password_confirmation=l,"hide-details":"","onClick:appendInner":t[3]||(t[3]=l=>e.show3=!e.show3)},null,8,["type","append-inner-icon","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(F),a(h,{class:"d-flex"},{default:n(()=>[a(z),a(g,{color:f,variant:"flat",onClick:l=>r.updatePassword(o)},{default:n(()=>[...t[7]||(t[7]=[b("update katasandi",-1)])]),_:1},8,["color","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(D,{value:"twofactor"},{default:n(()=>[a(M,{class:"mx-auto","max-width":"400"},{default:n(()=>[a(h,null,{default:n(()=>[!o.enabled_two_factor&&!o.confirmed_two_factor?(u(),k("div",Ke,[...t[8]||(t[8]=[d("p",{class:"text-justify"}," Anda belum mengaktifkan fitur otentifikasi dua langkah ",-1),d("p",{class:"mt-3 text-justify"}," Saat fitur otentifikasi dua langkah di aktifkan, Anda akan di minta untuk scan kode QR dan meng-input token keamanan. Anda akan mendapatkan token ini melalui aplikasi Google Authenticator di handphone. ",-1)])])):j("",!0),o.enabled_two_factor&&!o.confirmed_two_factor?(u(),k("div",Re,[t[9]||(t[9]=d("p",{class:"text-justify"}," Silahkan scan QR code di bawah menggunakan aplikasi Google Authenticator di handphone Anda. ",-1)),d("div",{class:"d-flex align-center justify-center py-4",innerHTML:o.svg_two_factor},null,8,Ge),t[10]||(t[10]=d("p",{class:"text-justify"}," Silahkan masukan token dari aplikasi Google Authenticator untuk konfirmasi aktivasi fitur ini. ",-1)),t[11]||(t[11]=d("div",{class:"text-overline text-center"}," token konfirmasi ",-1)),a(Ie,{label:"Konfirmasi",length:"6",modelValue:o.otp_two_factor,"onUpdate:modelValue":l=>o.otp_two_factor=l},null,8,["modelValue","onUpdate:modelValue"])])):j("",!0),o.enabled_two_factor&&o.confirmed_two_factor?(u(),k("div",Le,[t[12]||(t[12]=d("p",null," Fitur otentifikasi dua langkah sekarang telah aktif. ",-1)),t[13]||(t[13]=d("p",{class:"mt-3 text-justify"}," Simpan kode pemulihan dibawah ini pada tempat yang aman. Kode ini dapat di gunakan untuk memulihkan kembali akses dua langkah otentifikasi akun Anda jika perangkat hilang. ",-1)),d("div",Ne,[d("code",We,[(u(!0),k(R,null,Z(o.recovery_code_two_factor,(l,i)=>(u(),k("p",{key:i},B(l),1))),128))])])])):j("",!0)]),_:2},1024),a(F),a(h,{class:"d-flex"},{default:n(()=>[a(z),o.enabled_two_factor&&!o.confirmed_two_factor?(u(),x(g,{key:0,color:f,variant:"flat",onClick:l=>r.confirmTwoFactorAuthentication(o)},{default:n(()=>[...t[14]||(t[14]=[b("konfirmasi",-1)])]),_:1},8,["color","onClick"])):j("",!0),o.enabled_two_factor?(u(),x(g,{key:1,color:"deep-orange",class:"ml-2",variant:"flat",onClick:l=>r.disableTwoFactorAuthentication(o)},{default:n(()=>[...t[15]||(t[15]=[b("hapus",-1)])]),_:1},8,["onClick"])):j("",!0),o.enabled_two_factor?j("",!0):(u(),x(g,{key:2,color:f,variant:"flat",onClick:l=>r.enableTwoFactorAuthentication(o)},{default:n(()=>[...t[16]||(t[16]=[b("Aktifkan Fitur",-1)])]),_:1},8,["color","onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024),a(D,{value:"sessions"},{default:n(()=>[a(M,{class:"mx-auto","max-width":"400"},{default:n(()=>[a(h,null,{default:n(()=>[t[21]||(t[21]=d("div",{class:"text-grey-darken-1 mb-4"},[d("p",null," Jika diperlukan, Anda dapat keluar dari semua sesi di semua device yang pernah terhubung. "),d("p",{class:"mt-3"}," list dibawah ini adalah beberapa sesi terbaru Anda. Daftar ini mungkin tidak lengkap, jika Anda merasa bahwa akun Anda telah disusupi. Anda juga harus meng-update Katasandi. ")],-1)),(u(!0),k(R,null,Z(o.sessions,(l,i)=>(u(),k("div",{key:i,class:ne([{"mt-2":i>0},"d-block text-grey-darken-1"])},[d("div",Ye,[l.agent.is_mobile?(u(),x(y,{key:0},{default:n(()=>[...t[17]||(t[17]=[b("phone_iphone",-1)])]),_:1})):l.agent.is_tablet?(u(),x(y,{key:1},{default:n(()=>[...t[18]||(t[18]=[b("tablet_mac",-1)])]),_:1})):(u(),x(y,{key:2},{default:n(()=>[...t[19]||(t[19]=[b("computer",-1)])]),_:1})),d("div",Qe,[d("div",qe,B(l.agent.platform)+" - "+B(l.agent.browser),1),d("div",Je,[b(" IP: "+B(l.ip_address)+", ",1),l.is_current_device?(u(),k("span",Xe,"This device")):(u(),k("span",Ze,"Last activity: "+B(l.last_active),1))])]),a(g,{color:f,density:"compact",variant:"flat",rounded:"lg",icon:""},{default:n(()=>[a(y,{size:"small"},{default:n(()=>[...t[20]||(t[20]=[b("map",-1)])]),_:1})]),_:1},8,["color"])]),a(F)],2))),128))]),_:2},1024),a(h,{class:"d-flex pt-1"},{default:n(()=>[a(z),a(g,{color:f,variant:"flat"},{default:n(()=>[t[23]||(t[23]=b(" Hapus Sesi Lainnya ",-1)),a(je,{activator:"parent","max-width":"340"},{default:n(({isActive:l})=>[a(Fe,{"prepend-icon":"delete",title:"Hapus Sesi Lainnya?"},{default:n(()=>[a(h,null,{default:n(()=>[t[22]||(t[22]=d("p",{class:"text-caption text-justify mb-4"}," Untuk menghapus sesi browser yang lain, silahkan masukan katasandi Anda pada input di bawah ini. ",-1)),a(L,null,{default:n(()=>[a(C,{cols:"12"},{default:n(()=>[a(I,{"append-inner-icon":e.visible?"visibility":"visibility_off",type:e.visible?"text":"password",label:"Katasandi",placeholder:"Masukan Katasandi",modelValue:o.password,"onUpdate:modelValue":i=>o.password=i,"hide-details":"","onClick:appendInner":t[4]||(t[4]=i=>e.visible=!e.visible)},null,8,["append-inner-icon","type","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),d("div",ea,[a(z),a(g,{color:f,text:"Batal",onClick:i=>l.value=!1},null,8,["color","onClick"]),a(g,{color:"deep-orange",class:"ml-2",text:"Hapus",variant:"flat",onClick:i=>r.logoutOtherDevices(()=>l.value=!1,o)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)]),_:1})}const oa=Ue(Ee,[["render",aa]]);export{oa as default};
